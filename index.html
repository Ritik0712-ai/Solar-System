<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Solar System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000000;
            font-family: 'Inter', sans-serif;
        }
        canvas {
            display: block;
        }
        #info-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            max-width: 500px;
            width: 90%;
        }
        #info-modal.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .modal-content {
            position: relative;
        }
        /* Custom scrollbar for modal */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }
        .modal-body::-webkit-scrollbar-track {
            background: #2d3748; /* gray-800 */
        }
        .modal-body::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-600 */
            border-radius: 4px;
        }
        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gray-500 */
        }
    </style>
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Canvas for the 3D scene -->
    <canvas id="solar-system-canvas"></canvas>

    <!-- Modal for displaying planet information -->
    <div id="info-modal" class="hidden bg-gray-900 bg-opacity-80 backdrop-blur-sm text-white rounded-xl shadow-2xl overflow-hidden border border-gray-700">
        <div class="modal-content p-6">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors">&times;</button>
            <h2 id="planet-name" class="text-3xl font-bold mb-4 text-cyan-400"></h2>
            <div id="planet-info" class="modal-body max-h-[60vh] overflow-y-auto pr-4">
                <p id="planet-description" class="text-base mb-4"></p>
                <div id="planet-facts" class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm"></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Load OrbitControls as a separate script after three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script type="module">
        // OrbitControls is now available on the global THREE object, so we no longer need to import it here.

        // --- SCENE SETUP ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        camera.position.z = 30;
        camera.position.y = 10;

        const renderer = new THREE.WebGLRenderer({
            canvas: document.getElementById('solar-system-canvas'),
            antialias: true
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);

        // --- LIGHTING ---
        // Ambient light to softly illuminate the whole scene
        const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
        scene.add(ambientLight);

        // Point light for the Sun
        const sunLight = new THREE.PointLight(0xffffff, 2.5, 2000);
        scene.add(sunLight);

        // --- CONTROLS ---
        // Use THREE.OrbitControls since it's now loaded globally.
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.screenSpacePanning = false;
        controls.minDistance = 5;
        controls.maxDistance = 500;

        // --- PLANET DATA ---
        const planetData = {
            sun: {
                name: 'Sun',
                description: 'The Sun is the star at the center of the Solar System. It is a nearly perfect sphere of hot plasma, heated to incandescence by nuclear fusion reactions in its core.',
                facts: {
                    'Diameter': '1.39 million km',
                    'Surface Temperature': '5,505 °C',
                    'Age': '4.6 billion years',
                    'Composition': 'Hydrogen (73%), Helium (25%)'
                }
            },
            mercury: {
                name: 'Mercury',
                description: 'Mercury is the smallest planet in the Solar System and nearest to the Sun. Its orbit takes 87.97 Earth days, the shortest of all the Sun\'s planets.',
                facts: {
                    'Diameter': '4,879 km',
                    'Day Length': '59 Earth days',
                    'Orbital Period': '88 Earth days',
                    'Moons': '0'
                }
            },
            venus: {
                name: 'Venus',
                description: 'Venus is the second planet from the Sun. It is a terrestrial planet and is sometimes called Earth\'s "sister planet" because of their similar size, mass, proximity to the Sun, and bulk composition.',
                facts: {
                    'Diameter': '12,104 km',
                    'Day Length': '243 Earth days',
                    'Orbital Period': '225 Earth days',
                    'Surface Temperature': '462 °C'
                }
            },
            earth: {
                name: 'Earth',
                description: 'Our home planet, Earth is the third planet from the Sun and the only astronomical object known to harbor life. About 29.2% of Earth\'s surface is land consisting of continents and islands.',
                facts: {
                    'Diameter': '12,742 km',
                    'Day Length': '24 hours',
                    'Orbital Period': '365.25 days',
                    'Moons': '1'
                }
            },
            mars: {
                name: 'Mars',
                description: 'Mars is the fourth planet from the Sun and the second-smallest planet in the Solar System, being only larger than Mercury. In English, Mars carries the name of the Roman god of war.',
                facts: {
                    'Diameter': '6,779 km',
                    'Day Length': '24.6 hours',
                    'Orbital Period': '687 Earth days',
                    'Moons': '2 (Phobos & Deimos)'
                }
            },
            jupiter: {
                name: 'Jupiter',
                description: 'Jupiter is the fifth planet from the Sun and the largest in the Solar System. It is a gas giant with a mass more than two and a half times that of all the other planets in the Solar System combined.',
                facts: {
                    'Diameter': '139,820 km',
                    'Day Length': '9.9 Earth hours',
                    'Orbital Period': '11.9 Earth years',
                    'Moons': '79 (e.g., Io, Europa)'
                }
            },
            saturn: {
                name: 'Saturn',
                description: 'Saturn is the sixth planet from the Sun and the second-largest in the Solar System, after Jupiter. It is a gas giant with an average radius of about nine times that of Earth. It only has one-eighth the average density of Earth; however, with its larger volume, Saturn is over 95 times more massive.',
                facts: {
                    'Diameter': '116,460 km',
                    'Day Length': '10.7 Earth hours',
                    'Orbital Period': '29.5 Earth years',
                    'Moons': '82 (e.g., Titan, Enceladus)'
                }
            },
            uranus: {
                name: 'Uranus',
                description: 'Uranus is the seventh planet from the Sun. It has the third-largest planetary radius and fourth-largest planetary mass in the Solar System. Uranus is similar in composition to Neptune, and both have bulk chemical compositions which differ from that of the larger gas giants Jupiter and Saturn.',
                facts: {
                    'Diameter': '50,724 km',
                    'Day Length': '17.2 Earth hours',
                    'Orbital Period': '84 Earth years',
                    'Feature': 'Rotates on its side'
                }
            },
            neptune: {
                name: 'Neptune',
                description: 'Neptune is the eighth and farthest-known Solar planet from the Sun. In the Solar System, it is the fourth-largest planet by diameter, the third-most-massive planet, and the densest giant planet. It is 17 times the mass of Earth, slightly more massive than its near-twin Uranus.',
                facts: {
                    'Diameter': '49,244 km',
                    'Day Length': '16.1 Earth hours',
                    'Orbital Period': '164.8 Earth years',
                    'Feature': 'Strongest winds in the solar system'
                }
            }
        };


        // --- OBJECT CREATION ---
        const celestialObjects = [];

        // Sun
        const sunGeometry = new THREE.SphereGeometry(5, 64, 64);
        const sunMaterial = new THREE.MeshStandardMaterial({
            emissive: 0xffff00,
            emissiveIntensity: 1,
            map: createSunTexture()
        });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        sun.userData = { id: 'sun', ...planetData.sun };
        scene.add(sun);
        celestialObjects.push(sun);

        function createSunTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 256;
            canvas.height = 128;
            const context = canvas.getContext('2d');
            const gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);
            gradient.addColorStop(0.3, 'rgba(255,200,50,1)');
            gradient.addColorStop(0.6, 'rgba(255,100,0,1)');
            gradient.addColorStop(1.0, 'rgba(200,0,0,1)');
            context.fillStyle = gradient;
            context.fillRect(0, 0, canvas.width, canvas.height);
            return new THREE.CanvasTexture(canvas);
        }

        // Planets
        const planets = [
            { id: 'mercury', color: 0xaaaaaa, size: 0.5, distance: 8, speed: 0.004 },
            { id: 'venus', color: 0xffd700, size: 0.8, distance: 12, speed: 0.003 },
            { id: 'earth', color: 0x0077ff, size: 1, distance: 17, speed: 0.002 },
            { id: 'mars', color: 0xff4500, size: 0.7, distance: 24, speed: 0.0015 },
            { id: 'jupiter', color: 0xffa500, size: 3.5, distance: 40, speed: 0.0008 },
            { id: 'saturn', color: 0xf0e68c, size: 3, distance: 60, speed: 0.0006 },
            { id: 'uranus', color: 0xadd8e6, size: 2, distance: 80, speed: 0.0004 },
            { id: 'neptune', color: 0x0000ff, size: 1.9, distance: 100, speed: 0.0002 },
        ];

        planets.forEach(p => {
            const planetGeometry = new THREE.SphereGeometry(p.size, 32, 32);
            const planetMaterial = new THREE.MeshStandardMaterial({ color: p.color, roughness: 0.8 });
            const planet = new THREE.Mesh(planetGeometry, planetMaterial);
            planet.position.x = p.distance;
            planet.userData = { ...p, ...planetData[p.id] };

            const planetContainer = new THREE.Object3D();
            planetContainer.add(planet);
            scene.add(planetContainer);
            planet.userData.container = planetContainer;

            // Orbit Path
            const orbitGeometry = new THREE.RingGeometry(p.distance - 0.1, p.distance + 0.1, 128);
            const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x333333, side: THREE.DoubleSide });
            const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
            orbit.rotation.x = Math.PI / 2;
            scene.add(orbit);

            celestialObjects.push(planet);

            // Saturn's Rings
            if (p.id === 'saturn') {
                const ringGeometry = new THREE.RingGeometry(p.size + 1, p.size + 3, 64);
                const ringMaterial = new THREE.MeshBasicMaterial({ color: 0xaaa_a8a, side: THREE.DoubleSide, transparent: true, opacity: 0.6});
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = Math.PI * 0.4;
                planet.add(ring);
            }
        });
        
        // --- STARFIELD ---
        const starVertices = [];
        for (let i = 0; i < 10000; i++) {
            const x = THREE.MathUtils.randFloatSpread(2000);
            const y = THREE.MathUtils.randFloatSpread(2000);
            const z = THREE.MathUtils.randFloatSpread(2000);
            starVertices.push(x, y, z);
        }
        const starGeometry = new THREE.BufferGeometry();
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 });
        const stars = new THREE.Points(starGeometry, starMaterial);
        scene.add(stars);

        // --- RAYCASTER FOR INTERACTIVITY ---
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        function onMouseClick(event) {
            // Calculate mouse position in normalized device coordinates (-1 to +1) for both components
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);

            // Calculate objects intersecting the picking ray
            const intersects = raycaster.intersectObjects(celestialObjects);

            if (intersects.length > 0) {
                const clickedObject = intersects[0].object;
                showInfoModal(clickedObject.userData);
            }
        }
        window.addEventListener('click', onMouseClick, false);

        // --- MODAL LOGIC ---
        const modal = document.getElementById('info-modal');
        const planetName = document.getElementById('planet-name');
        const planetDescription = document.getElementById('planet-description');
        const planetFacts = document.getElementById('planet-facts');
        const closeModal = document.getElementById('close-modal');

        function showInfoModal(data) {
            planetName.textContent = data.name;
            planetDescription.textContent = data.description;
            planetFacts.innerHTML = ''; // Clear previous facts

            if (data.facts) {
                 for (const [key, value] of Object.entries(data.facts)) {
                    const factElement = document.createElement('div');
                    factElement.className = 'bg-gray-800 p-3 rounded-lg';
                    factElement.innerHTML = `<strong class="font-semibold text-cyan-300">${key}:</strong><br>${value}`;
                    planetFacts.appendChild(factElement);
                }
            }
           
            modal.classList.remove('hidden');
        }

        closeModal.addEventListener('click', () => {
            modal.classList.add('hidden');
        });

        // --- ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);

            // Planet orbits
            celestialObjects.forEach(obj => {
                if (obj.userData.container) {
                    obj.userData.container.rotation.y += obj.userData.speed;
                }
                 // Planet self-rotation
                obj.rotation.y += 0.005;
            });

            controls.update();
            renderer.render(scene, camera);
        }

        // --- RESIZE HANDLER ---
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Start animation
        animate();
    </script>

</body>
</html>
